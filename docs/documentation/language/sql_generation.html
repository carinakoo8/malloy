---
layout: documentation
title: Malloy Documentation
footer: /generated/footers/language/sql_generation.html
---

<div class="document">
      <h2>
        <a id="how-malloy-generates-sql" class="header-link anchor" href="#how-malloy-generates-sql">
          How Malloy Generates SQL
        </a>
      </h2>
    <p>Basic structure of a Malloy Query:</p>
<pre class="language-txt" style="background-color: #FBFBFB"><span class="line"><span style="color: #000000">query: &lt;source&gt; {
  join_one: &lt;source&gt; with …
  join_many: &lt;source&gt; on …
} -&gt; {
   group_by:
    &lt;field/dimension&gt;
    &lt;field/dimension&gt;
   aggregate:
    &lt;aggregation/measure&gt;
    &lt;aggregation/measure&gt;
   nest:
    &lt;named_query OR query_def&gt;
    &lt;named_query OR query_def&gt;
   where: &lt;filter_expression&gt;, &lt;filter_expression&gt;, …
   having: &lt;aggregate_filter_expression&gt;, &lt;aggregate_filter_expression&gt;
   order_by: &lt;field/dimension&gt;, &lt;aggregation/measure&gt;, …
   limit: &lt;limit&gt;
}
</span></span></pre><p>This maps to the below SQL query structure:</p>
<pre class="language-txt" style="background-color: #FBFBFB"><span class="line"><span style="color: #000000">SELECT
   &lt;group_by&gt;, &lt;group_by&gt;, …
   &lt;aggregate&gt;, &lt;aggregate&gt;, …
   &lt;nest&gt;, &lt;nest&gt;, …  			-- very much a simplification
FROM &lt;source&gt;
LEFT JOIN &lt;source&gt; ON …
LEFT JOIN &lt;source&gt; ON …
WHERE (&lt;filter_expression&gt;) AND (&lt;filter_expression&gt;) AND …
GROUP BY &lt;group_by&gt;, &lt;group_by&gt;, …
HAVING &lt;aggregate_filter_expression&gt; AND &lt;aggregate_filter_expression&gt; AND …
ORDER BY &lt;group_by&gt; | &lt;aggregate&gt;
LIMIT &lt;limit&gt;
</span></span></pre>
      <h2>
        <a id="sql-to-malloy" class="header-link anchor" href="#sql-to-malloy">
          SQL to Malloy
        </a>
      </h2>
    
      <h3>
        <a id="components-of-a-query" class="header-link anchor" href="#components-of-a-query">
          Components of a Query
        </a>
      </h3>
    <table>
<thead>
<tr>
<th>SQL</th>

<th>Malloy</th>

<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td><code> userName AS user_name malloy-data.ecomm.users AS users </code></td>

<td><code class="language-malloy" style="background-color: #FBFBFB"><span class="line"><span style="color: #001080">user_name</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #001080">userName</span><span style="color: #000000"> </span><span style="color: #001080">users</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #001080">malloy</span><span style="color: #000000">-</span><span style="color: #001080">data</span><span style="color: #000000">.</span><span style="color: #001080">ecomm</span><span style="color: #000000">.</span><span style="color: #001080">users</span></span></code></td>

<td><strong>AS</strong>: Aliasing: names come first in Malloy. This gesture is different so we think a different keywords is appropriate: <code class="language-malloy" style="background-color: #FBFBFB"><span class="line"><span style="color: #AF00DB">is</span></span></code> vs <code class="language-malloy" style="background-color: #FBFBFB"><span class="line"><span style="color: #001080">AS</span></span></code>.</td>
</tr>

<tr>
<td><code>SELECT id FROM order_items</code></td>

<td><code class="language-malloy" style="background-color: #FBFBFB"><span class="line"><span style="color: #AF00DB">query</span><span style="color: #000000">: </span><span style="color: #001080">order_items</span><span style="color: #000000"> -&gt; {</span><span style="color: #AF00DB">project</span><span style="color: #000000">: </span><span style="color: #001080">id</span><span style="color: #000000">}</span></span></code></td>

<td><strong>SELECT / FROM</strong>: <a href="https://looker-open-source.github.io/malloy/documentation/index.html">Malloy by Example</a></td>
</tr>

<tr>
<td></td>

<td></td>

<td></td>
</tr>
</tbody></table>
</div>