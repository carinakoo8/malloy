---
layout: documentation
title: Malloy Documentation
footer: /generated/footers/visualizations/bar_charts.html
---

<div class="document">
      <h1>
        <a id="bar-charts" class="header-link anchor" href="#bar-charts">
          Bar Charts
        </a>
      </h1>
    <p>There are two types of bar charts.  <em>Two measure bar charts</em> (gradiant bar charts) and <em>Two Dimension Bar</em> Charts (stacked bar charts).</p>

      <h2>
        <a id="two-measures" class="header-link anchor" href="#two-measures">
          Two Measures
        </a>
      </h2>
    <p>This chart looks at flights and counts the number of aircraft owned by each carrier.  It also, using a gradiant,
shows the number of flights made per plane.</p>
<pre class="language-malloy"><span class="token keyword">explore</span> <span class="token string">'malloy-data.faa.flights'</span> <span class="token operator">|</span> <span class="token keyword">reduce</span>
  by_carrier <span class="token keyword">is</span> <span class="token punctuation">(</span><span class="token keyword">reduce</span>
    carrier
    aircraft_count <span class="token keyword">is</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token function_keyword">distinct</span> tail_num<span class="token punctuation">)</span>
    flights_per_aircraft <span class="token keyword">is</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token function_keyword">distinct</span> tail_num<span class="token punctuation">)</span>
  <span class="token punctuation">)</span></pre><div class="error">Error: Error: Error(s) compiling model:
FILE: internal://internal.malloy
line 1: mismatched input 'explore' expecting {<EOF>, EXPLORE, QUERY, IMPORT, ';'}
  | explore 'malloy-data.faa.flights' | reduce
  | ^</div><p>Data Style</p>
<pre class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"by_carrier"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"bar_chart"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre>
      <h2>
        <a id="two-dimensions" class="header-link anchor" href="#two-dimensions">
          Two Dimensions
        </a>
      </h2>
    <p>In this case we are going to look at carriers by flight count and stack the destination.  We are only going to look at flights
with the destination SFO, OAK or SJC.</p>
<pre class="language-malloy"><span class="token keyword">explore</span> <span class="token string">'malloy-data.faa.flights'</span>
<span class="token operator">|</span> <span class="token keyword">reduce</span> : <span class="token punctuation">[</span>
    destination : <span class="token string">'SFO'</span><span class="token operator">|</span><span class="token string">'OAK'</span><span class="token operator">|</span><span class="token string">'SJC'</span>
  <span class="token punctuation">]</span> <span class="token keyword">top</span> <span class="token number">10</span>
  by_carrier <span class="token keyword">is</span> <span class="token punctuation">(</span><span class="token keyword">reduce</span>
    carrier
    flight_count <span class="token keyword">is</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
    destination
  <span class="token punctuation">)</span></pre><div class="error">Error: Error: Error(s) compiling model:
FILE: internal://internal.malloy
line 1: mismatched input 'explore' expecting {<EOF>, EXPLORE, QUERY, IMPORT, ';'}
  | explore 'malloy-data.faa.flights'
  | ^</div><p>Data Style</p>
<pre class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"by_carrier"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"bar_chart"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>We could flip the dimensions around and look at the airports' flights by carrier.</p>
<pre class="language-malloy"><span class="token keyword">explore</span> <span class="token string">'malloy-data.faa.flights'</span>
<span class="token operator">|</span> <span class="token keyword">reduce</span> : <span class="token punctuation">[</span>destination : <span class="token string">'SFO'</span><span class="token operator">|</span><span class="token string">'OAK'</span><span class="token operator">|</span><span class="token string">'SJC'</span><span class="token punctuation">]</span>
by_carrier <span class="token keyword">is</span> <span class="token punctuation">(</span><span class="token keyword">reduce</span>
  destination
  flight_count <span class="token keyword">is</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
  carrier<span class="token punctuation">,</span>
<span class="token punctuation">)</span></pre><div class="error">Error: Error: Error(s) compiling model:
FILE: internal://internal.malloy
line 1: mismatched input 'explore' expecting {<EOF>, EXPLORE, QUERY, IMPORT, ';'}
  | explore 'malloy-data.faa.flights'
  | ^</div></div>